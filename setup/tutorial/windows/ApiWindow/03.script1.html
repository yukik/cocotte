<h3>ウインドウスクリプト(クライアントサイド)</h3>

<p>
	スクリプトにはクライアントサイドとサーバサイドの２つのスクリプトが存在します。<br />
	ここではクライアントサイドのスクリプトを解説します。
</p>

<p>
	スクリプトを設定する事で、ユーザーがウインドウやウインドウ内のコンテンツを操作する事が出来ます。<br />
	ウインドウ個別に設定したスクリプトは、他のウインドウで使用する事はできません。<br />
	すべてのスクリプトで使用する事ができるスクリプトはワークスペースに設定してください。<br />
	個別のウインドウに設定されたスクリプトを検索し存在する場合はそのスクリプトを追加します <br />
	見つからなかった場合はプリセットスクリプト(後述)を設定します<br />
	以下、スクリプトの記述例と実装方法です
</p>

<h3>クライアントサイドスクリプトの例</h3>
<p>
	スクリプトを設置したいウインドウのフォルダにclient.jsファイルを作成して次のコードを記述してください。
</p>
<pre class='code'>
client.showWinId = function showWinId (e) {
	var win = this.getWin();
	if (win) {
		new cocotte.Win('確認', 'ウインドウIDは' + win.id + 'です', {mode: 'info'});
	}
	e.stopPropagation();
};
client.ev1 = function ev1 () {
	$(this).css('color', 'red');
};
client.ev2 = function ev2 () {
	$(this).css('color', 'black');
};</pre>

<h3>実装方法</h3>
<p>
	スクリプトはエレメントにdata-script='スクリプト名'を追加します。<br />
	複数のスクリプトを異なるイベントで追加する場合は実装方法の２つ目の例のように記述してください。
</p>
<pre class='code'>
&#60;button data-script='showWinId'&#62;example1&#60;/button&#62;
&#60;button data-script='click:showWinId, mouseover:ev1, mouseout:ev2'&#62;example2&#60;/button&#62;
</pre>

<p>
	動作を確認する為にボタンをクリックもしくはマウスオーバーしてください。<br />
	<button data-script='showWinId'>example1</button>
	<button data-script='click:showWinId, mouseover:ev1, mouseout:ev2'>example2</button><br />

	thisはイベントを起こしたElementを指します。
	this.getWin()は、ウインドウをオブジェクトを取得します。詳しくは<a data-winname='Api'>API概要</a>のグローバル定義で解説されています。<br />
	もちろんbutton以外にもスクリプトを追加する事ができます。<br />
	<br /> 
	(注意)<br /> 
	Aタグのときのみ他と異なり、クリックイベントを追加した場合にhref要素の値がjavascript:void(0)に書き換えられます。リンク先の表示とスクリプトの実行は同時に設定出来ない事に注意してください。<br /> 
	<br />
	(ちょっと補足)<br />
	showWinIdの中で、e.stopPropagation();と記述がありますが、これを外した場合はウインドウを開いた後にウインドウ自身のクリックイベントが発生します。<br />
	結果、開かれたウインドウが処理後に、ウインドウのアクティブイベントが発生するため、後ろに隠れるように表示されてしまいます。<br />
	clickイベントを後に、アクティブウインドウしたくない場面ではイベントの伝播を防止する為にe.stopPropagation()追加してください。
</p>

<h3>フックスクリプト</h3>
<p>
	フックスクリプトとは、ボタンなどにイベントの追加するのではなくウインドウの動作により実行されるスクリプトです。<br />
</p>

<dl class='description'>
	<dt>onCreate</dt>
	<dd>ウインドウが作成された時に実行されます</dd>

	<dt>onShow</dt>
	<dd>ウインドウが表示されたときに実行されます。最小化状態から通常表示した場合も都度実行されます</dd>
</dl>
<br />
<pre class='code'>
client.onCreate = function onCreate (win) {
    console.log('ウインドウ(id:' + win.id + ')が作成されました');
};
client.onShow = function onShow (win) {
    console.log('ウインドウ(id:' + win.id + ')が表示されました');
};</pre>
<p>
	先ほどのスクリプトと同様にclientのメソッドとして記述しますが、引数にウインドウオブジェクトが設定されている事に注意してください。
</p>

<h3>ワークスペーススクリプト</h3>

<p>
	個別に設定されたスクリプトだけではなく、共通のスクリプトを利用する事が出来ます。
	上記の検索で見つからないスクリプトを指定した場合は、プリセットのスクリプトを検索し存在する場合はそのスクリプトを割り当てます。<br />
	以下プリセットのスクリプトの説明をします<br />
	通常は個別設定と同じdata-scriptをエレメントに追加します
</p>

<h3>ポートレットスクリプト</h3>
<p>
	コンテンツにポートレットを設定されたウインドウでは、ポートレットにも設定できるスクリプトが存在します。<br />
	その場合は、ポートレットに設定されたスクリプトを最優先で検索します。<br />
	ポートレットでは、viewにイベントを手動で追加する事はそれほど多くないですが、設定できるポートレットではスクリプトの検索優先順位に注意してください。<br />
	ポートレットについては<a data-winname='ApiPortlet'>Portlet API</a>を参照してください
</p>







